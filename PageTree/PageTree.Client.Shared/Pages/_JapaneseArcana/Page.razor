@page "/learn/pages"
@inherits BasePage

@using Corelibs.BlazorShared.UI;
@using Corelibs.BlazorViews.Layouts;
@using Microsoft.JSInterop;

<BackgroundAndContent @ref=@_backgroundOwner Opacity=0.1f>
    @*<PageContent Left=@context.Item1 Top=@context.Item2 PageID=@_pageID/>*@
    <PageTree.Client.Shared.Views.Pages.Page Left=@context.Item1 Top=@context.Item2 OnPropertyClick=OnPropertyClick IsEditMode=false/>
</BackgroundAndContent>

@code {
#if DEBUG
    private const string _pageID = "350b10d0-f72a-4f8f-92a6-5da3b80cac6a";
#else
    private const string _pageID = "20caa0c3-243b-47f9-968f-2d6a1e0dd27a";
#endif

    protected override void OnInitialized()
    {
        RefreshInvoker.Action = () => InvokeAsync(StateHasChanged);
    }

    private Task OnPropertyClick(TreeLayout.TreeNode property)
    {
        Console.WriteLine(property.Identity.Name);

        return Task.CompletedTask;
    }
}
